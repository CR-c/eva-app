# Taro + React 小程序基础框架 PRD

## 一、产品背景

本项目旨在构建一套基于 **Taro + React**
的小程序基础框架，用于快速开发各类小程序项目，统一工程结构、登录体系与基础能力，减少重复建设成本。

## 二、产品目标

-   提供开箱即用的小程序工程模板\
-   内置微信一键登录与账号体系\
-   封装请求、缓存、权限等通用能力\
-   降低新项目与新成员的启动成本

## 三、使用对象

-   前端开发工程师\
-   后端接口对接人员\
-   新入职成员 / 外包\
-   AI 自动生成业务代码

## 四、技术选型

-   框架：Taro 4\
-   视图层：React\
-   语言：TypeScript\
-   状态管理：Zustand\
-   请求能力：Taro.request 二次封装

## 五、整体架构设计

    UI 层（Pages / Components）
    ↓
    业务逻辑层（Hooks / Services）
    ↓
    基础能力层（Auth / Request / Cache）
    ↓
    平台能力（Taro / 微信 API）

## 六、功能模块说明

### 6.1 应用启动与生命周期管理

-   App 启动时自动恢复登录态
-   初始化用户信息
-   全局异常兜底处理

### 6.2 微信一键登录

-   调用 wx.login 获取 code
-   后端换取 token / openid
-   本地缓存登录态
-   登录失败统一提示

### 6.3 登录态管理

-   Token 本地持久化
-   请求自动注入 Header
-   Token 失效（401）统一处理

### 6.4 请求封装

-   统一 BaseURL
-   统一返回结构
-   网络异常处理
-   防止重复请求

### 6.5 全局状态管理

-   用户信息状态
-   登录状态
-   全局 loading
-   权限信息

### 6.6 路由与权限控制

-   页面进入登录校验
-   白名单页面机制
-   页面级权限控制

### 6.7 本地缓存封装

-   setCache / getCache / removeCache
-   支持过期时间
-   统一 Key 管理

### 6.8 基础 UI 能力

-   Loading
-   Toast
-   Modal
-   Empty
-   Error

## 七、非功能性需求

-   高可维护性
-   模块可裁剪
-   易扩展
-   新人 30 分钟可运行

## 八、交付物

-   可运行模板工程
-   README 使用说明
-   示例页面（登录页 / 首页）

## 九、里程碑规划

-   V0.1：工程骨架 + 登录
-   V0.2：请求 / 状态 / 缓存
-   V0.3：权限 / 示例
-   V1.0：稳定发布
